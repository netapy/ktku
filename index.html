<!DOCTYPE html>
<html lang="fr">

<head>
  <!-- Basic Page Needs
  ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì -->
  <meta charset="utf-8">
  <title>Kataku</title>
  <meta name="description" content="Kataku">
  <meta name="author" content="LFB">
  <link rel="manifest" href="./manifest.json">

  <!-- Mobile Specific Metas
  ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="propeller" content="022e5cb60dd89ccffad196bbdbabdcaf">

  <!-- CSS
  ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/modal.css">

  <!-- JS
  ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/alasql/0.6.1/alasql.min.js"></script>
  <script src="js/ktk.js"></script>
  <script src="js/img.js"></script>
  <script src="js/init.js"></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146443684-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-146443684-2');
  </script>
  <!-- Google Analytics -->
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-XXXXX-Y', 'auto');
    ga('send', 'pageview');
  </script>
  <!-- End Google Analytics -->


  <!-- Favicon
  ‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì -->
  <link rel="icon" type="image/png" href="assets/icon.png">
  <link rel="apple-touch-icon" href="assets/icon192.png">
  <link rel="apple-touch-icon" href="touch-icon-iphone.png">
  <link rel="apple-touch-icon" sizes="152x152" href="touch-icon-ipad.png">
  <link rel="apple-touch-icon" sizes="180x180" href="touch-icon-iphone-retina.png">
  <link rel="apple-touch-icon" sizes="167x167" href="touch-icon-ipad-retina.png">
</head>

<script>
  var dateActuelle = new Date();
</script>

<body scroll="no" style="overflow: hidden;">
  <div class="blockNoCode" id="disclaimerBlock">
    <div
      style="border-color: #b8b8b8; border-style: dotted; padding: 30px 10px; font-size: 16px; margin: 0px 20px; text-align: center; max-width: 500px;">
      <img src="assets/img_cartes/GOAT.png" style="width:80%; max-width: 300px;;margin: 20px 40px;"><br>
      L'abus d'alcool est dangereux pour la sant√©. Kataku est interdit aux mineurs et n'est pas reponsable d'incidents
      li√©s √† son utilisation.<br>
      <button style="margin: 25px 0px;"
        onclick="this.parentNode.parentNode.style.display='none'; localStorage.setItem('disclaimer',String(dateActuelle.getDate()))">J'accepte.</button>
    </div>
  </div>

  <script>
    if (localStorage.getItem('disclaimer') == dateActuelle.getDate()) {
      document.getElementById("disclaimerBlock").style.display = "none"
    }
  </script>

  <div class="installPop">
    <img src="assets/icon2.png"
      style="height: 75%; margin-right: 12px; border-radius: 20%; box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);">
    <span style="font-size: 14px; width: 60%; padding:0px 5px;">T√©l√©charge <span
        style="font-family: GapSansBold;">Kataku</span> en tapant sur "<strong style="white-space: nowrap;">Partager
        <img src="assets/interface/share.png" style="height: 20px; transform: translateY(5px);"></strong>" puis
      "<strong>
        Ajouter √† l'√©cran
        d'accueil</strong>".</span>
  </div>
  <div class="installPop">
    <img src="assets/icon2.png"
      style="height: 75%; margin-right: 12px; border-radius: 20%; box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);">
    <span style="font-size: 14px; width: 60%; padding:0px 5px;">T√©l√©charge <span
        style="font-family: GapSansBold;">Kataku</span> en tapant sur "<strong style="white-space: nowrap;">Menu <img
          src="assets/interface/ch_share.png" style="height: 20px; transform: translateY(5px);"></strong>"
      puis "<strong> Ajouter √† l'√©cran
        d'accueil</strong>".</span>
  </div>

  <div class="mainContainer">
    <div class="menu">
      <h5 id='titreMenu' style="margin-top:6%; width: 100%; white-space: nowrap;">On joue ?</h5>
      <div style="width: 100%; height:33%;">
        <img class="brainlet" src="assets/selecjoueurs.png">
      </div>
      <div id="listeJoueurs" class="styleLstJoueurs row" tabindex="0">
        <span id="dumbPrListe"
          style="opacity: 0.5; padding: 0px 35px; font-weight: 100; text-align: center; font-size: 12px;">...
        </span>
      </div>
      <div style="width: 100%; position: relative; margin-bottom: 20px;">
        <span class="btnPlus" data-custom-open="modal-1" style="background-color: #F1F1F1; color: #363636;"
          onclick="">‚ò∞</span>
        <input id="champJoueur" class="champJoueurAjout" placeholder="Joueur..." maxlength="8">
        <span class="btnPlus" style="background-color: #363636; padding-left: 10px;padding-right: 10px;"
          onclick="ajoutUnJoueur(document.getElementById('champJoueur'))">+</span>
      </div>
      <div style='width: 100%; z-index: 10; height: auto;'>
        <button id="suivantPage1" onclick="GOslider()" style="opacity: 0.6;" disabled>
          - Ajoute 3 joueurs -</button>
      </div>
      <div class="logoktk">
        <img class='logobot' src="assets/logo_kataku_transpar.png" />
      </div>
    </div>
  </div>

  <div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
      <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-1-title">
        <header class="modal__header"><span class="modal__close" aria-label="Close modal"
            data-custom-close="modal-1"></span>
          <h5 id="modal-1-title"> Choisis ton jeu : </h5>
        </header>
        <main class="modal__content" id="modal-1-content">
          <div class="gameTitle" data-custom-close="modal-1">üçª Kataku Classic</div>
          <div class="gameTitle" style="opacity: .8;">üëÄ Comming soon</div>
        </main>
      </div>
    </div>
  </div>


  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('service-worker.js');
      });
    }
  </script>

  <script>
    document.getElementById('champJoueur').addEventListener("keyup", function (event) {
      if (event.key === "Enter") {
        ajoutUnJoueur(this)
      }
    });
    let btnSuivantP1 = document.getElementById("suivantPage1")

    function ajoutUnJoueur(ee) {
      let lstElemdejq = document.getElementsByClassName('jrSelect');
      for (let ii in lstElemdejq) {
        if (String(lstElemdejq[ii].innerHTML).toLowerCase() == String(ee.value).toLowerCase() + " ") {
          return
        }
      }
      if (lstElemdejq.length == 20) {
        alert('Max 8 joueurs')
      } else if (ee.value.replace(" ", "") == "") {
        null;
      } else {
        let htmlTagJr = "<span onclick='this.parentNode.removeChild(this); adjustBtn()' class='jrSelect'>" + ee.value +
          " </span> ";
        document.getElementById('dumbPrListe').insertAdjacentHTML('beforebegin', htmlTagJr);
        adjustBtn();
        ee.value = "";
        ee.focus();
      }
    }

    function adjustBtn() {
      if (document.getElementsByClassName('jrSelect').length >= 3) {
        btnSuivantP1.disabled = false;
        btnSuivantP1.style.opacity = 1;
        btnSuivantP1.innerHTML = '- Suivant -';
      } else {
        btnSuivantP1.innerHTML = "- Ajoute " + String(3 - document.getElementsByClassName('jrSelect').length) +
          " joueurs -";
        btnSuivantP1.disabled = true;
        btnSuivantP1.style.opacity = 0.6;
      }
      if (document.getElementsByClassName('jrSelect').length == 9) {
        document.getElementById('dumbPrListe').innerHTML = '';
      } else {
        document.getElementById('dumbPrListe').innerHTML = '...';
      }
    }
  </script>

  <script>
    let Lstjoueurs = []

    function GOslider() {
      Lstjoueurs = []
      let spanJoueurs = document.getElementsByClassName('jrSelect')
      for (var i = 0; i < spanJoueurs.length; i++) {
        Lstjoueurs.push(spanJoueurs[i].innerHTML)
      }
      ga('send', {
        hitType: 'event',
        eventCategory: 'game_stat',
        eventAction: '1 -> 2',
        eventLabel: 'nbJoueurs',
        eventValue: Lstjoueurs.length
      });

      localStorage.setItem('lesJoueurs', Lstjoueurs)
      document.body.style.transform = "rotateY(-90deg)";
      setTimeout(() => {
        window.location.href = 'slider.html';
      }, 500);
    }
  </script>

  <script>
    document.getElementById("titreMenu").innerHTML = [
      "On joue ?",
      "On se la colle ?",
      "On vient se la mettre ?",
      "On vient se d√©boiter ?",
      "On prend sa cuite ?",
      "On prend une biture ?",
      "On a soif ?",
      "On s'arrache la face ?",
      "On vient se d√©molir ?",
      "On s'√©clate la tronche ?",
      "On se met une murge ?",
      "On se p√®te la ruche ?",
      "On se torpille le caisson ?",
      "On se remplit le cornet ?",
      "On se retourne la t√™te ?",
      "On se prend une timbale ?"
    ][Math.floor(Math.random() * 15)];

    document.getElementsByClassName('brainlet')[0].src = 'assets/selecjoueurs.png'

    fetch('https://kataku.app/dbjsn.txt')
      .then(function (response) {
        return response.text();
      })
      .then(function (data) {
        var jsonrep = JSON.parse(listeJoueurss2(data, 'NJKFFFF'));
        localStorage.setItem("contenu", JSON.stringify(jsonrep))
      })
      .catch(function (err) {
        console.log(err)
      });
  </script>
  <script>
    window.history.pushState("null", "null", "/")
  </script>
  <script>
    try {
      let lstprovjr = localStorage.getItem('lesJoueurs').split(',')
      if (lstprovjr.length >= 3) {
        for (i in lstprovjr) {
          let htmlTagJr = "<span onclick='this.parentNode.removeChild(this); adjustBtn()' class='jrSelect'>" +
            lstprovjr[
              i] +
            " </span> ";
          document.getElementById('dumbPrListe').insertAdjacentHTML('beforebegin', htmlTagJr);
          adjustBtn();
        }
      }
    } catch (e) {
      console.log(e)
    }
  </script>

  <script>
    let ua = navigator.userAgent.toLowerCase();
    if (window.matchMedia('(display-mode: standalone)').matches == false) {
      if (window.innerHeight > window.innerWidth) {
        document.body.scroll = 'yes';
        document.body.style.overflow = '';
        if (ua.indexOf('iphone') != -1 || ua.indexOf('ipad') != -1) {
          document.getElementsByClassName('installPop')[0].style.display = "flex";
        } else {
          document.getElementsByClassName('installPop')[1].style.display = "flex";
        }
      }
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/micromodal@0.4.6/dist/micromodal.min.js"></script>
  <script>
    MicroModal.init({
      openTrigger: 'data-custom-open', // [3]
      closeTrigger: 'data-custom-close', // [4]
      openClass: 'is-open', // [5]
      disableScroll: true, // [6]
      disableFocus: false, // [7]
    });
  </script>
</body>

</html>